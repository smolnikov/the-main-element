# Элемент `main`

Элемент `<main>` недавно был официально добавлен в спецификацию HTML W3C. Теперь,
когда шумиха по этому поводу немного улеглась, настало время разобраться где и
когда имеет смысл его использовать. Итак, приступим.

## История

Включение в спецификацию тега `main` или ему подобного обсуждалось в рабочих
группах довольно долго, часто поднимался вопрос, почему есть такие элементы,
как `<header>`, `<article>` или `<footer>`, но нет элемента, который бы
содержал основное наполнение страницы.

[Стив Фолкнер][1] (Steve Faulkner), консультант по вопросам доступности и
один из редакторов проекта html5 doctor, потрудился собрать данные, юзкейсы и
пообщаться с людьми, что бы заинтересовать их в имплементации. По словам Стива,
он общался:

> со всеми, кто занимается его имплементацией (и общей, и с учетом доступности
> материалов), разработчиками, авторами, пользователями, которыми смог и получил
> их советы и отзывы. Я искал их в самых разных местах; в IRC, почтовых
> рассылках, твитере, блогах, конференциях — везде.

> *[Стив Фолкнер][1]*

Это привело к написанию [расширению спецификации для элемента `<main>`][2] и
[обоснованию случаев его применения][3].

«Предложение» [было принято в ноябре 2012][4], и тег `<main>` был добавлен в
спецификацию HTML 5.1. Недавно он был добавлен еще и в спецификацию HTML5, что
ни у кого не вызвало возражений. Давайте посмотрим, что спецификация говорит об
элементе `<main>`.

## Спецификация W3C

*До тех пор, пока все браузеры не начнут по умолчанию присваивать соответствующую
роль элементу `<main>` стоит использовать атрибут `role`, который предлагает
ARIA.*

Основное назначение элемента `<main>` в том, что бы привязать значение `main`
атрибута `role` ARIA к определенному элементу HTML. Это поможет скринридерам и
прочим вспомогательным технологиям определять где начинается основное содержание
документа. Спецификация W3C описывает `<main>` следующим образом:

> Основное содержание документа или приложения. Область, содержащая основные
> данные, которые непосредственно связаны или расширяют основную тему документа
> или основной функционал приложения.

> *[Черновик спецификации HTML для редакторов W3C][5].*

Так как элемент `<main>` теперь является часть спецификации HTML, то элемент
`<body>` возвращает себе определение, которое было в спецификации HTML4.

> Элемент `body` заключает в себе содержимое документа.

> *[Черновик спецификации HTML для редакторов W3C][5].*

## Подробности

Важная особенность элемента `<main>`, это то, что он может быть использован в
документе только один раз. [Джереми Кеиз (Jeremy Keith) задал рабочей группе
вопрос][7] о том, почему нельзя использовать множество элементов `<main>`. Я
не буду углубляться в подробности, но рекомендую прочесть эту дискуссию.

Что касается спецификации, то если вы попытаетесь использовать больше одного
элемента `<main>` в документе [валидатор W3C][8] выведет ошибку.

Кроме того `<main>` не может быть потомком элементов `<article>`, `<aside>`,
`<footer>`, `<header>`, или `<nav>`.

Так как `<main>` не предназначен для [разбиение наполнения на части][9], он не
влияет на структуру документа, так, как это делают элементы `<article>`,
`<nav>`, или `<section>`.

## Приступим

Так же как и при появлении множества других новых элементов HTML5, не все
браузеры распознают `<main>` и содержат стили для него. Что бы быть уверенным,
что они есть, стоит добавить в CSS правило, которое сделает `main` блочным
элементом.

    main {display:block;}

Кроме того, для старых IE вам понадобится создать элемент c помощью JavaScript:

    <script>document.createElement('main');</script>

Естественно, если вы используете [html5shiv][10], `<main>` в него уже включен.

## Использование элемента `<main>` на сайте HTML5 Doctor

Самый простой способ использовать `<main>` — заменить им `<div>` который вы,
скорее всего, пометили `id` или `class` со значениями, вроде `main` или `content`.

Так как это выглядит на практике? Ну, ниже представлена разметка HTML5 Doctor
до имплементации `<main>`.

    <body>
    <header role="banner">
    [...]
    </header>

    <div id="content" class="group" role="main">
    [...]
    </div>

    <footer role="contentinfo">
        [...]
    </footer>
    </body>

И вот так она выглядит сейчас:

    <body>
    <header role="banner">
    [...]
    </header>

    <main id="content" class="group" role="main">
    [...]
    </main>

    <footer role="contentinfo">
        [...]
    </footer>
    </body>

*`id="content"` мы в определенный момент тоже убрали.*

Да, все действительно настолько просто. В самом худшем случае для имплементации
не потребуется и пяти минут.

## Версия WHATWG

Определение элемента `<main>`, которое дает WHATWG отличается от определения
элемента по версии W3C тем, что WHATWG не наделяет его определенным значением.
Это не более чем элемент, который используется для применения стилей (что то
вроде нового `<div>`) и с точки зрения семантики представляет то, что содержит.

> Элемент `main` можно использовать как контейнер основного наполнения документа
> или другого элемента. С точки зрения семантики он представляет то, что содержит.

> *[WHATWG HTML][11]*

Мы рекомендуем использовать элемент `<main>` согласно версии W3C, описанной выше.

## Поддержка браузерами

[Firefox 21][12], Chrome 26, и [WebKit r140374][13] обеспечивают базовую поддержку
элемента `<main>`.

Они все по умолчанию присваивают элементу `<main>` `role="main"` ARIA,
что бы вспомогательные технологии могли без проблем распознать его.

## Выводы

Как видите, начать применять элемент `<main>` невероятно просто. Имплементация
займет пару минут, так что настало время начинать использовать его на сайтах,
которые вы разрабатываете.

Если вы не уверены когда или где использовать `<main>`, задавайте вопросы в
комментариях и кто то из нас попробует вам помочь разобраться.

## Материалы для дальнейшего чтения

* [Sitepoint — HTML5 Main Element][14]
* [MDN — main][15]
* [Ian Devlin — The main element][16]
* [Bruce Lawson — Using the main element][17]
* [Filament Group — The main element][18]
* [W3C — main element use cases][19]
* [Web Monkey — The main element lands a starring role in html][20]
* [Web Monkey — The main element would help HTML get to the point][21]

[1]: http://html5doctor.com/interview-steve-faulkner-html5-editor-new-doctor/
[2]: https://dvcs.w3.org/hg/html-extensions/raw-file/tip/maincontent/index.html
[3]: http://www.w3.org/html/wg/wiki/User:Sfaulkne/main-usecases#Introduction
[4]: http://lists.w3.org/Archives/Public/public-html/2012Nov/0232.html
[5]: http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-main-element
[6]: http://www.w3.org/html/wg/drafts/html/master/sections.html#the-body-element
[7]: http://lists.w3.org/Archives/Public/public-html/2013Jan/0230.html
[8]: http://validator.w3.org/nu/
[9]: http://www.w3.org/html/wg/drafts/html/master/dom.html#sectioning-content-0
[10]: https://github.com/aFarkas/html5shiv
[11]: http://www.whatwg.org/specs/web-apps/current-work/multipage/grouping-content.html#the-main-element
[12]: http://www.mozilla.org/en-US/firefox/21.0/releasenotes/
[13]: http://nightly.webkit.org/builds/trunk/mac/14
[14]: http://www.sitepoint.com/html5-main-element/
[15]: https://developer.mozilla.org/en-US/docs/HTML/Element/main
[16]: http://www.iandevlin.com/blog/2013/01/html5/the-main-element
[17]: http://www.brucelawson.co.uk/2013/the-main-element/
[18]: http://filamentgroup.com/lab/the_main_element/
[19]: http://www.w3.org/html/wg/wiki/User:Sfaulkne/main-usecases#Introduction
[20]: http://www.webmonkey.com/2013/02/main-element-lands-a-starring-role-in-html/
[21]: http://www.webmonkey.com/2012/12/proposed-main-element-would-help-html-get-to-the-point/
